<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TI‑HI Calculator – Boxes per Layer (TI) & Layers (HI)</title>
  <meta name="description" content="Find TI (boxes per layer) with/without 90° rotation, then estimate HI by height. EU/US + AU/JP presets. Copy/share results and open the full pallet calculator." />
  <link rel="canonical" href="https://pallet-calculator.com/ti-hi-calculator.html" />
  <link rel="alternate" hreflang="en" href="https://pallet-calculator.com/ti-hi-calculator.html" />
  <link rel="alternate" hreflang="x-default" href="https://pallet-calculator.com/ti-hi-calculator.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="TI‑HI Calculator" />
  <meta property="og:description" content="Compute TI with/without 90° rotation and estimate layers (HI). Includes EU/US + AU/JP presets." />
  <meta property="og:url" content="https://pallet-calculator.com/ti-hi-calculator.html" />
  <meta property="og:image" content="https://pallet-calculator.com/og-placeholder.jpg" />
  <meta name="twitter:card" content="summary_large_image" />
  <link rel="icon" href="/favicon.ico" />
  <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>

  <!-- Google tag (gtag.js) — place immediately after <head> (ONE snippet per page) -->
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-X4VDF9JBPE"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);} 
    gtag('js', new Date());
    gtag('config', 'G-X4VDF9JBPE');
  </script>

  <style>
    :root{ --bg:#0b1220; --panel:#0f172a; --muted:#94a3b8; --text:#e5e7eb; --brand:#3b82f6; --brand-2:#60a5fa; --radius:14px; --shadow:0 6px 18px rgba(0,0,0,.28); --container: 1120px; }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; background:linear-gradient(180deg,#0b1220 0%, #0b1220 60%, #0e1526 100%); color:var(--text); font: 16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji"}
    a{color:var(--brand); text-decoration:none}
    a:hover{color:var(--brand-2)}
    .container{max-width:var(--container); margin:0 auto; padding:24px}
    header.site-header{position:sticky; top:0; backdrop-filter:saturate(150%) blur(8px); background:rgba(15,23,42,.65); border-bottom:1px solid rgba(148,163,184,.15); z-index:20}
    .brand{display:inline-flex; align-items:center; gap:10px; font-weight:700; letter-spacing:.2px; color:#fff}
    .brand .dot{width:12px;height:12px;border-radius:50%;background:var(--brand); box-shadow:0 0 0 6px rgba(59,130,246,.18)}
    nav.nav{display:flex; gap:12px; flex-wrap:wrap}
    nav.nav a{color:var(--muted); padding:8px 12px; border-radius:999px; border:1px solid rgba(148,163,184,.18)}
    nav.nav a[aria-current="page"], nav.nav a:hover{color:#fff; background:rgba(59,130,246,.12); border-color:rgba(59,130,246,.35)}

    h1{font-size:clamp(28px,3.2vw,40px); line-height:1.15; margin:24px 0 8px}
    h2{font-size:clamp(20px,2.2vw,26px); margin:20px 0 12px}
    h3{font-size:19px; margin:12px 0}
    .muted{color:var(--muted)}

    .grid{display:grid; gap:18px}
    @media(min-width:960px){ .grid-2{grid-template-columns: 1.2fr .8fr} }

    .card{background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01)); border:1px solid rgba(148,163,184,.18); border-radius:var(--radius); box-shadow:var(--shadow)}
    .card .card-body{padding:18px}

    .form-row{display:grid; gap:10px; grid-template-columns: 1fr 1fr 1fr 1fr}
    .form-row-2{display:grid; gap:10px; grid-template-columns: 1fr 1fr}
    .field{display:flex; flex-direction:column; gap:6px}
    label{font-size:12px; color:var(--muted)}
    input[type="number"], select{width:100%; padding:10px 12px; border-radius:10px; border:1px solid rgba(148,163,184,.25); background:#0b1220; color:#e5e7eb}
    input[type="number"]:focus, select:focus{outline:none; border-color:rgba(59,130,246,.55); box-shadow:0 0 0 3px rgba(59,130,246,.35)}

    .btn{display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:10px 14px; border-radius:12px; border:1px solid rgba(148,163,184,.25); background:#0b1220; color:#e5e7eb; cursor:pointer}
    .btn:hover{border-color:rgba(59,130,246,.55); background:rgba(59,130,246,.10)}
    .btn.primary{background:var(--brand); border-color:var(--brand); color:#fff}
    .btn.primary:hover{background:#2563eb}
    .btn.ghost{background:transparent}
    .pill-group{display:flex; flex-wrap:wrap; gap:8px}

    .stat{background:rgba(148,163,184,.10); padding:10px 12px; border:1px dashed rgba(148,163,184,.25); border-radius:10px; margin-bottom:10px}
    .stat b{font-size:18px}

    .preview{height:220px; background:repeating-linear-gradient(45deg, rgba(59,130,246,.08) 0 12px, transparent 12px 24px); border-radius:var(--radius); border:1px dashed rgba(148,163,184,.25); display:flex; align-items:center; justify-content:center; color:var(--muted)}

    footer{color:var(--muted); border-top:1px solid rgba(148,163,184,.15); margin-top:36px}
    footer .container{display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between}
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container" style="display:flex; align-items:center; justify-content:space-between; gap:16px;">
      <a class="brand" href="/index.html" aria-label="pallet-calculator home"><span class="dot"></span> pallet‑calculator</a>
      <nav class="nav" aria-label="Primary">
        <a href="/pallet-calculator.html">Pallet Calculator</a>
        <a href="/ti-hi-calculator.html" aria-current="page">TI‑HI</a>
        <a href="/pallet-cube-calculator.html">Cube</a>
        <a href="/pallet-dimensions.html">Dimensions</a>
        <a href="/pallet-weight-calculator.html">Weight</a>
        <a href="/how-many-pallets-in-20ft-container.html">20ft</a>
        <a href="/how-many-pallets-in-40ft-container.html">40ft</a>
        <a href="/how-many-pallets-in-53-foot-trailer.html">53‑ft</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <h1>TI‑HI Calculator</h1>
    <p class="muted" style="margin-top:-6px">Compute boxes per layer (<b>TI</b>) with/without 90° rotation, then estimate layers (<b>HI</b>) by a stack height. Includes EU/US presets plus AU/JP.</p>

    <div class="grid grid-2" style="margin-top:12px">
      <!-- Inputs -->
      <section class="card" aria-labelledby="inputs">
        <div class="card-body">
          <h2 id="inputs">Inputs</h2>
          <div class="form-row-2" role="group" aria-label="Units and rotation">
            <div class="field">
              <label for="units">Units</label>
              <select id="units"><option value="mm">Millimeters (mm)</option><option value="in">Inches (in)</option></select>
            </div>
            <div class="field">
              <label for="rotate">Allow 90° rotation</label>
              <select id="rotate"><option value="yes">Yes</option><option value="no">No</option></select>
            </div>
          </div>

          <h3 style="margin-top:10px">Pallet</h3>
          <div class="pill-group" style="margin-bottom:8px">
            <button class="btn" type="button" data-preset="1200x800">EU 1200×800</button>
            <button class="btn" type="button" data-preset="1200x1000">EU 1200×1000</button>
            <button class="btn" type="button" data-preset="1219x1016">US 48×40</button>
            <button class="btn" type="button" data-preset="1165x1165">AU 1165×1165</button>
            <button class="btn" type="button" data-preset="1100x1100">JP 1100×1100</button>
          </div>
          <div class="form-row" role="group" aria-label="Pallet dimensions">
            <div class="field"><label for="palL">Length</label> <input id="palL" type="number" min="0" step="0.01" placeholder="e.g. 1200"/></div>
            <div class="field"><label for="palW">Width</label>  <input id="palW" type="number" min="0" step="0.01" placeholder="e.g. 1000"/></div>
            <div class="field"><label for="palMax">Max stack height (optional)</label> <input id="palMax" type="number" min="0" step="0.01" placeholder="e.g. 1200"/></div>
            <div class="field"><label for="boxH">Box height (optional, for HI)</label> <input id="boxH" type="number" min="0" step="0.01" placeholder="e.g. 150"/></div>
          </div>

          <h3 style="margin-top:10px">Box</h3>
          <div class="form-row" role="group" aria-label="Box dimensions">
            <div class="field"><label for="boxL">Length</label> <input id="boxL" type="number" min="0" step="0.01" placeholder="e.g. 300"/></div>
            <div class="field"><label for="boxW">Width</label>  <input id="boxW" type="number" min="0" step="0.01" placeholder="e.g. 200"/></div>
            <div class="field"><label for="gap">Spacing allowance (mm/in)</label> <input id="gap" type="number" min="0" step="0.1" placeholder="e.g. 0"/></div>
            <div class="field"><label for="overhang">Overhang (each side)</label> <input id="overhang" type="number" min="0" step="0.1" placeholder="0"></div>
          </div>

          <div style="display:flex; gap:10px; margin-top:14px">
            <button id="calcBtn" class="btn primary" type="button">Calculate</button>
            <button id="example" class="btn ghost" type="button">Try example</button>
            <a class="btn" id="openCalc" href="/pallet-calculator.html" onclick="gtag('event','cta_click',{from:'tihi',to:'pallet-calculator'})">Open Pallet Calculator</a>
          </div>
        </div>
      </section>

      <!-- Results -->
      <section class="card" aria-labelledby="results">
        <div class="card-body">
          <h2 id="results">Results</h2>
          <div class="stat">TI (boxes per layer): <b id="ti">–</b> <span class="muted" id="layout">–</span></div>
          <div class="stat">Estimated HI (layers): <b id="hi">–</b> <span class="muted" id="hiNote">(requires height)</span></div>
          <div class="stat">Total boxes (TI × HI): <b id="total">–</b></div>
          <div class="preview" id="preview">Preview will render here</div>
          <div style="display:flex; gap:8px; margin-top:12px">
            <button id="copyText" class="btn" type="button">Copy (text)</button>
            <button id="copyJSON" class="btn" type="button">Copy (JSON)</button>
            <button id="shareBtn" class="btn" type="button">Share link</button>
          </div>
        </div>
      </section>
    </div>

    <section class="card" style="margin-top:18px">
      <div class="card-body">
        <h2>Notes & disclaimer</h2>
        <ul>
          <li>We compute TI both at <b>0°</b> and <b>90°</b> orientations when rotation is allowed and pick the larger (ties prefer 0°).</li>
          <li>Optional <b>gap/overhang</b> reduce the effective pallet area when calculating rows × columns.</li>
          <li>Results are <b>planning estimates</b>; verify against handling rules, carrier limits, and safety standards.</li>
        </ul>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <p>© 2025 pallet-calculator.com</p>
      <p>Contact: <a href="mailto:support@pallet-calculator.com">support@pallet-calculator.com</a></p>
    </div>
  </footer>

  <script>
    const $ = (s)=>document.querySelector(s);
    const mmPerIn = 25.4;

    // Presets for pallet
    document.querySelectorAll('[data-preset]').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const [L,W] = btn.dataset.preset.split('x').map(Number);
        $('#palL').value = L; $('#palW').value = W; try{gtag('event','preset_click',{page:'tihi',value:btn.dataset.preset})}catch(e){}
      });
    });

    // Example
    $('#example').addEventListener('click',()=>{
      $('#units').value='mm';
      $('#rotate').value='yes';
      $('#palL').value=1200; $('#palW').value=1000; $('#palMax').value=1200;
      $('#boxL').value=300; $('#boxW').value=200; $('#boxH').value=150; $('#gap').value=0; $('#overhang').value=0;
      try{gtag('event','example_apply',{page:'tihi'})}catch(e){}
    });

    const q = new URLSearchParams(location.search);
    (function prefill(){
      ['units','rotate','palL','palW','palMax','boxL','boxW','boxH','gap','overhang'].forEach(k=>{ if(q.has(k)){ const el = document.getElementById(k); if(el) el.value = q.get(k); }});
    })();

    function n(id){return parseFloat(document.getElementById(id).value)||0}

    function calc(){
      const units = $('#units').value; const K = (units==='in')? mmPerIn : 1;
      let pL = n('palL')*K, pW = n('palW')*K;
      if(!(pL>0 && pW>0)) { alert('Enter positive pallet length/width.'); return; }

      const gap = n('gap')*K; const over = n('overhang')*K;
      pL = Math.max(0, pL - 2*over); pW = Math.max(0, pW - 2*over);
      pL = Math.max(0, pL - gap);    pW = Math.max(0, pW - gap);

      const bL = n('boxL')*K, bW = n('boxW')*K;
      if(!(bL>0 && bW>0)) { alert('Enter positive box length/width.'); return; }

      const allowRot = $('#rotate').value==='yes';
      const ti0 = Math.floor(pL/bL)*Math.floor(pW/bW);
      const ti90 = allowRot? Math.floor(pL/bW)*Math.floor(pW/bL) : 0;
      let perLayer = ti0; let layout = `${Math.floor(pL/bL)}×${Math.floor(pW/bW)} (0°)`;
      if(ti90>ti0){ perLayer = ti90; layout = `${Math.floor(pL/bW)}×${Math.floor(pW/bL)} (90°)`; }

      // HI
      let layers = 0; const palMax = n('palMax')*K; const boxH = n('boxH')*K;
      if(palMax>0 && boxH>0){ layers = Math.max(0, Math.floor(palMax / boxH)); $('#hiNote').textContent = ''; }
      else { $('#hiNote').textContent = '(enter height for HI)'; }

      const total = perLayer * (layers||1);

      // Render
      $('#ti').textContent = perLayer? perLayer : '–';
      $('#layout').textContent = layout;
      $('#hi').textContent = layers? layers : '–';
      $('#total').textContent = perLayer? total : '–';
      $('#preview').textContent = `TI ${perLayer||'-'} · HI ${layers||'-'} · Total ${perLayer? total:'-'} · Layout ${layout}`;

      // CTA link to full calculator with params
      const params = new URLSearchParams({units: $('#units').value, palL: $('#palL').value, palW: $('#palW').value, palMax: $('#palMax').value, boxL: $('#boxL').value, boxW: $('#boxW').value, boxH: $('#boxH').value, allowRotate: $('#rotate').value});
      $('#openCalc').href = `/pallet-calculator.html?${params.toString()}`;

      try{ gtag('event','calculate_click',{page:'tihi', ti: perLayer, hi: layers}); }catch(e){}
      return {perLayer,layers,total,layout};
    }

    document.getElementById('calcBtn').addEventListener('click', calc);

    // Copy helpers
    function copyText(r){
      const s = `TI: ${r.perLayer}\nHI: ${r.layers||'-'}\nTotal: ${r.total||'-'}\nLayout: ${r.layout}`;
      navigator.clipboard.writeText(s).then(()=>alert('Copied to clipboard'));
    }
    function copyJSON(r){
      const data = {ti:r.perLayer, hi:r.layers, total:r.total, layout:r.layout};
      navigator.clipboard.writeText(JSON.stringify(data, null, 2)).then(()=>alert('JSON copied'));
    }

    document.getElementById('copyText').addEventListener('click',()=>{ const r = calc(); if(r){ copyText(r); try{gtag('event','copy_result',{fmt:'text'})}catch(e){} }});
    document.getElementById('copyJSON').addEventListener('click',()=>{ const r = calc(); if(r){ copyJSON(r); try{gtag('event','copy_result',{fmt:'json'})}catch(e){} }});

    document.getElementById('shareBtn').addEventListener('click',()=>{
      const r = calc(); if(!r) return;
      const params = new URLSearchParams({units: $('#units').value, rotate: $('#rotate').value, palL: $('#palL').value, palW: $('#palW').value, palMax: $('#palMax').value, boxL: $('#boxL').value, boxW: $('#boxW').value, boxH: $('#boxH').value, gap: $('#gap').value, overhang: $('#overhang').value});
      const url = `${location.origin}${location.pathname}?${params.toString()}`;
      navigator.clipboard.writeText(url).then(()=>alert('Shareable link copied'));
      try{ gtag('event','share_click',{channel:'link'}) }catch(e){}
    });
  </script>

  <!-- Optional structured data: SoftwareApplication + FAQ -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"SoftwareApplication",
    "name":"TI‑HI Calculator",
    "applicationCategory":"BusinessApplication",
    "operatingSystem":"Web",
    "offers":{"@type":"Offer","price":"0","priceCurrency":"USD"}
  }
  </script>
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {"@type":"Question","name":"What is TI‑HI?","acceptedAnswer":{"@type":"Answer","text":"TI is boxes per layer; HI is number of layers. Total boxes ≈ TI × HI."}},
      {"@type":"Question","name":"When should I allow 90° rotation?","acceptedAnswer":{"@type":"Answer","text":"Enable rotation to try both orientations and pick the larger per‑layer count. Some products restrict orientation due to labeling or stability."}},
      {"@type":"Question","name":"Are results exact?","acceptedAnswer":{"@type":"Answer","text":"They are planning estimates that ignore minor tolerances and packaging deformation. Verify with your logistics provider."}}
    ]
  }
  </script>
</body>
</html>
