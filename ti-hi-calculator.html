<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TI‑HI Calculator – Best Case Layout per Layer</title>
  <meta name="description" content="Compute the best rows × columns (TI‑HI) per pallet layer. Supports 0°/90° rotation, EU/US + AU/JP presets, mm/in. Copy or share results and jump to the full pallet calculator." />
  <link rel="canonical" href="https://pallet-calculator.com/ti-hi-calculator.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="TI‑HI Calculator" />
  <meta property="og:description" content="Find the best rows × columns (per layer) with rotation optimization and area utilization." />
  <meta property="og:url" content="https://pallet-calculator.com/ti-hi-calculator.html" />
  <meta property="og:image" content="https://pallet-calculator.com/og-placeholder.jpg" />
  <meta name="twitter:card" content="summary_large_image" />
  <link rel="icon" href="/favicon.ico" />
  <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>

  <!-- Google tag (gtag.js) — place immediately after <head> (ONE snippet per page) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-MXJVLGW6C3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);} 
    gtag('js', new Date());
    gtag('config', 'G-MXJVLGW6C3');
  </script>

  <style>
    :root{ --bg:#0b1220; --panel:#0f172a; --muted:#94a3b8; --text:#e5e7eb; --brand:#3b82f6; --brand-2:#60a5fa; --radius:14px; --shadow:0 6px 18px rgba(0,0,0,.28); --container: 1120px; }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; background:linear-gradient(180deg,#0b1220 0%, #0b1220 60%, #0e1526 100%); color:var(--text); font: 16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji"}
    a{color:var(--brand); text-decoration:none}
    a:hover{color:var(--brand-2)}
    .container{max-width:var(--container); margin:0 auto; padding:24px}
    header.site-header{position:sticky; top:0; backdrop-filter:saturate(150%) blur(8px); background:rgba(15,23,42,.65); border-bottom:1px solid rgba(148,163,184,.15); z-index:20}
    .brand{display:inline-flex; align-items:center; gap:10px; font-weight:700; letter-spacing:.2px; color:#fff}
    .brand .dot{width:12px;height:12px;border-radius:50%;background:var(--brand); box-shadow:0 0 0 6px rgba(59,130,246,.18)}
    nav.nav{display:flex; gap:12px; flex-wrap:wrap}
    nav.nav a{color:var(--muted); padding:8px 12px; border-radius:999px; border:1px solid rgba(148,163,184,.18)}
    nav.nav a[aria-current="page"], nav.nav a:hover{color:#fff; background:rgba(59,130,246,.12); border-color:rgba(59,130,246,.35)}

    h1{font-size:clamp(28px,3.2vw,40px); line-height:1.15; margin:24px 0 8px}
    h2{font-size:clamp(20px,2.2vw,26px); margin:20px 0 12px}
    h3{font-size:19px; margin:12px 0}
    .muted{color:var(--muted)}

    .grid{display:grid; gap:18px}
    @media(min-width:960px){ .grid-2{grid-template-columns: 1.2fr .8fr} }

    .card{background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01)); border:1px solid rgba(148,163,184,.18); border-radius:var(--radius); box-shadow:var(--shadow)}
    .card .card-body{padding:18px}

    .form-row{display:grid; gap:10px; grid-template-columns: 1fr 1fr 1fr 1fr}
    .form-row-2{display:grid; gap:10px; grid-template-columns: 1fr 1fr}
    .field{display:flex; flex-direction:column; gap:6px}
    label{font-size:12px; color:var(--muted)}
    input[type="number"], select{width:100%; padding:10px 12px; border-radius:10px; border:1px solid rgba(148,163,184,.25); background:#0b1220; color:#e5e7eb}
    input[type="number"]:focus, select:focus{outline:none; border-color:rgba(59,130,246,.55); box-shadow:0 0 0 3px rgba(59,130,246,.35)}

    .btn{display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:10px 14px; border-radius:12px; border:1px solid rgba(148,163,184,.25); background:#0b1220; color:#e5e7eb; cursor:pointer}
    .btn:hover{border-color:rgba(59,130,246,.55); background:rgba(59,130,246,.10)}
    .btn.primary{background:var(--brand); border-color:var(--brand); color:#fff}
    .btn.primary:hover{background:#2563eb}
    .btn.ghost{background:transparent}
    .pill-group{display:flex; flex-wrap:wrap; gap:8px}

    .stat{background:rgba(148,163,184,.10); padding:10px 12px; border:1px dashed rgba(148,163,184,.25); border-radius:10px; margin-bottom:10px}
    .stat b{font-size:18px}

    .preview{height:240px; background:repeating-linear-gradient(45deg, rgba(59,130,246,.08) 0 12px, transparent 12px 24px); border-radius:var(--radius); border:1px dashed rgba(148,163,184,.25); display:flex; align-items:center; justify-content:center; color:var(--muted)}

    footer{color:var(--muted); border-top:1px solid rgba(148,163,184,.15); margin-top:36px}
    footer .container{display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between}
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container" style="display:flex; align-items:center; justify-content:space-between; gap:16px;">
      <a class="brand" href="/index.html" aria-label="pallet-calculator home"><span class="dot"></span> pallet‑calculator</a>
      <nav class="nav" aria-label="Primary">
        <a href="/pallet-calculator.html">Pallet Calculator</a>
        <a href="/ti-hi-calculator.html" aria-current="page">TI‑HI</a>
        <a href="/pallet-cube-calculator.html">Cube</a>
        <a href="/pallet-dimensions.html">Dimensions</a>
        <a href="/pallet-weight-calculator.html">Weight</a>
        <a href="/how-many-pallets-in-20ft-container.html">20ft</a>
        <a href="/how-many-pallets-in-40ft-container.html">40ft</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <h1>TI‑HI Calculator</h1>
    <p class="muted" style="margin-top:-6px">Get the best rows × columns per layer (TI‑HI). Compare 0° and 90° orientation and see area utilization. Then jump to the full Pallet Calculator for layers, height, weight, and container fit.</p>

    <div class="grid grid-2" style="margin-top:12px">
      <!-- Inputs -->
      <section class="card" aria-labelledby="inputs">
        <div class="card-body">
          <h2 id="inputs">Inputs</h2>
          <div class="form-row-2" role="group" aria-label="Unit and rotation">
            <div class="field">
              <label for="units">Units</label>
              <select id="units">
                <option value="mm">Millimeters (mm)</option>
                <option value="in">Inches (in)</option>
              </select>
            </div>
            <div class="field">
              <label for="allowRotate">Allow 90° rotation</label>
              <select id="allowRotate"><option value="yes">Yes</option><option value="no">No</option></select>
            </div>
          </div>

          <h3 style="margin-top:10px">Pallet</h3>
          <div class="pill-group" style="margin-bottom:8px">
            <button class="btn" type="button" data-preset="1200x800">EU 1200×800</button>
            <button class="btn" type="button" data-preset="1200x1000">EU 1200×1000</button>
            <button class="btn" type="button" data-preset="1219x1016">US 48×40</button>
            <button class="btn" type="button" data-preset="1165x1165">AU 1165×1165</button>
            <button class="btn" type="button" data-preset="1100x1100">JP 1100×1100</button>
          </div>
          <div class="form-row" role="group" aria-label="Pallet dimensions">
            <div class="field"><label for="palL">Length</label> <input id="palL" type="number" min="0" step="0.01" placeholder="e.g. 1200"/></div>
            <div class="field"><label for="palW">Width</label>  <input id="palW" type="number" min="0" step="0.01" placeholder="e.g. 1000"/></div>
          </div>

          <h3 style="margin-top:10px">Box</h3>
          <div class="form-row" role="group" aria-label="Box dimensions">
            <div class="field"><label for="boxL">Length</label> <input id="boxL" type="number" min="0" step="0.01" placeholder="e.g. 300"/></div>
            <div class="field"><label for="boxW">Width</label>  <input id="boxW" type="number" min="0" step="0.01" placeholder="e.g. 200"/></div>
            <div class="field" style="grid-column: span 2;">
              <button id="example" class="btn ghost" type="button">Try example</button>
            </div>
          </div>

          <div style="display:flex; gap:10px; margin-top:14px">
            <button id="calcBtn" class="btn primary" type="button">Calculate TI‑HI</button>
            <a class="btn" id="openCalc" href="/pallet-calculator.html" onclick="gtag('event','cta_click',{from:'ti-hi',to:'pallet-calculator'})">Open Pallet Calculator</a>
          </div>
        </div>
      </section>

      <!-- Results -->
      <section class="card" aria-labelledby="results">
        <div class="card-body">
          <h2 id="results">Results</h2>
          <div class="stat">Best layout: <b id="bestLayout">–</b></div>
          <div class="stat">Boxes per layer (TI): <b id="ti">–</b></div>
          <div class="stat">Area utilization: <b id="areaUtil">–</b></div>
          <div class="preview" id="preview">Preview will render here</div>
          <div style="display:flex; gap:8px; margin-top:12px">
            <button id="copyText" class="btn" type="button">Copy (text)</button>
            <button id="copyJSON" class="btn" type="button">Copy (JSON)</button>
            <button id="shareBtn" class="btn" type="button">Share link</button>
          </div>
        </div>
      </section>
    </div>

    <section class="card" style="margin-top:18px">
      <div class="card-body">
        <h2>What is TI‑HI?</h2>
        <p><b>TI</b> is boxes per <i>layer</i> (rows × columns). <b>HI</b> is the number of layers. This tool focuses on <b>TI</b> only. Use the full Pallet Calculator to include stack height (HI), pallet height/limits, and optional container capacity.</p>
      </div>
    </section>

    <section class="card" style="margin-top:18px">
      <div class="card-body">
        <h2>FAQ</h2>
        <h3>Why does rotation matter?</h3>
        <p class="muted">Allowing 90° rotation lets the algorithm compare (L×W) vs (W×L), sometimes fitting more boxes or improving area utilization.</p>
        <h3>Which standards are included?</h3>
        <p class="muted">Presets include EU (1200×800, 1200×1000), US (48×40 / 1219×1016), AU (1165×1165), JP (1100×1100). You can input any custom size.</p>
        <h3>Disclaimer</h3>
        <p class="muted">Results are planning estimates. Actual fit depends on pallet overhang, packaging tolerances, and safety policies.</p>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <p>© 2025 pallet-calculator.com</p>
      <p>Contact: <a href="mailto:contact@pallet-calculator.com">contact@pallet-calculator.com</a> (placeholder)</p>
    </div>
  </footer>

  <script>
    const $ = (s)=>document.querySelector(s);
    const mmPerIn = 25.4;
    const q = new URLSearchParams(location.search);

    // Presets for pallet
    document.querySelectorAll('[data-preset]').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const [L,W] = btn.dataset.preset.split('x').map(Number);
        $('#palL').value = L; $('#palW').value = W; try{gtag('event','preset_click',{page:'ti-hi',value:btn.dataset.preset})}catch(e){}
      });
    });

    // Example
    $('#example').addEventListener('click',()=>{
      $('#units').value='mm';
      $('#palL').value=1200; $('#palW').value=1000;
      $('#boxL').value=300; $('#boxW').value=200;
      $('#allowRotate').value='yes';
      try{gtag('event','example_apply',{page:'ti-hi'})}catch(e){}
    });

    // Prefill from URL
    (function prefill(){
      ['units','palL','palW','boxL','boxW','allowRotate'].forEach(k=>{ if(q.has(k)){ const el = document.getElementById(k); if(el) el.value = q.get(k); }});
    })();

    function valNum(id){return parseFloat(document.getElementById(id).value)||0}

    function calc(){
      const units = $('#units').value;
      const K = units==='in'? mmPerIn : 1;
      const pL = valNum('palL')*K, pW = valNum('palW')*K;
      const bL = valNum('boxL')*K, bW = valNum('boxW')*K;
      if(!(pL>0 && pW>0 && bL>0 && bW>0)) { alert('Please enter positive numbers for pallet and box.'); return; }

      const rows1 = Math.floor(pL/bL), cols1 = Math.floor(pW/bW), ti1 = rows1*cols1;
      const canRot = $('#allowRotate').value==='yes';
      const rows2 = canRot? Math.floor(pL/bW) : 0;
      const cols2 = canRot? Math.floor(pW/bL) : 0;
      const ti2 = rows2*cols2;

      let best = {ti:ti1, rows:rows1, cols:cols1, angle:'0°'};
      if(canRot && ti2>ti1) best = {ti:ti2, rows:rows2, cols:cols2, angle:'90°'};

      const usedArea = best.ti * (bL*bW);
      const util = `${(100* usedArea / (pL*pW)).toFixed(1)}%`;

      $('#bestLayout').textContent = `${best.rows} × ${best.cols} (${best.angle})`;
      $('#ti').textContent = best.ti;
      $('#areaUtil').textContent = util;
      $('#preview').textContent = `Layout: ${best.rows}×${best.cols} (${best.angle}) · TI ${best.ti} · Util ${util}`;

      // Update CTA link to full calculator
      const params = new URLSearchParams({units: $('#units').value, palL: $('#palL').value, palW: $('#palW').value, boxL: $('#boxL').value, boxW: $('#boxW').value, allowRotate: $('#allowRotate').value});
      $('#openCalc').href = `/pallet-calculator.html?${params.toString()}`;

      try{ gtag('event','calculate_click',{page:'ti-hi', ti:best.ti, angle:best.angle}); }catch(e){}
      return {units, pL,pW,bL,bW, best, util};
    }

    document.getElementById('calcBtn').addEventListener('click', calc);

    // Copy helpers
    function copyText(r){
      const s = `Best layout: ${r.best.rows}×${r.best.cols} (${r.best.angle})\nTI (boxes per layer): ${r.best.ti}\nArea utilization: ${r.util}`;
      navigator.clipboard.writeText(s).then(()=>alert('Copied to clipboard'));
    }
    function copyJSON(r){
      const data = {units:r.units, pallet:{L:r.pL,W:r.pW}, box:{L:r.bL,W:r.bW}, best:{rows:r.best.rows,cols:r.best.cols,angle:r.best.angle,ti:r.best.ti}, areaUtil:r.util};
      navigator.clipboard.writeText(JSON.stringify(data, null, 2)).then(()=>alert('JSON copied'));
    }

    document.getElementById('copyText').addEventListener('click',()=>{ const r = calc(); if(r){ copyText(r); try{gtag('event','copy_result',{fmt:'text'})}catch(e){} }});
    document.getElementById('copyJSON').addEventListener('click',()=>{ const r = calc(); if(r){ copyJSON(r); try{gtag('event','copy_result',{fmt:'json'})}catch(e){} }});

    document.getElementById('shareBtn').addEventListener('click',()=>{
      const r = calc(); if(!r) return;
      const params = new URLSearchParams({units: $('#units').value, palL: $('#palL').value, palW: $('#palW').value, boxL: $('#boxL').value, boxW: $('#boxW').value, allowRotate: $('#allowRotate').value});
      const url = `${location.origin}${location.pathname}?${params.toString()}`;
      navigator.clipboard.writeText(url).then(()=>alert('Shareable link copied'));
      try{ gtag('event','share_click',{channel:'link'}) }catch(e){}
    });
  </script>

  <!-- Optional structured data: SoftwareApplication + FAQ -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"SoftwareApplication",
    "name":"TI‑HI Calculator",
    "applicationCategory":"BusinessApplication",
    "operatingSystem":"Web",
    "offers":{"@type":"Offer","price":"0","priceCurrency":"USD"}
  }
  </script>
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {"@type":"Question","name":"Why does rotation matter?","acceptedAnswer":{"@type":"Answer","text":"Allowing 90° rotation lets the tool compare (L×W) vs (W×L), sometimes fitting more boxes or improving area utilization."}},
      {"@type":"Question","name":"Which standards are included?","acceptedAnswer":{"@type":"Answer","text":"Presets include EU (1200×800, 1200×1000), US (48×40 / 1219×1016), AU (1165×1165), JP (1100×1100). You can input any custom size."}}
    ]
  }
  </script>
</body>
</html>
