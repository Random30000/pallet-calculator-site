<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pallet Calculator (TI × HI, Multi‑SKU, Shareable)</title>
    <!-- Canonical URL helps search engines understand the preferred URL for this page -->
    <link rel="canonical" href="/pallet-calculator/" />
    <!-- Meta description for SEO -->
    <meta
      name="description"
      content="Calculate how many cartons fit on a pallet with our interactive pallet calculator. Supports multi‑SKU and TI × HI results and generates shareable URLs."
    />
    <!-- Open Graph tags for social sharing -->
    <meta property="og:title" content="Pallet Calculator – Multi‑SKU TI × HI Calculator" />
    <meta
      property="og:description"
      content="Use our pallet calculator to determine TI (cases per layer) and HI (layers per pallet) for multiple cartons. Share results with a link."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="/pallet-calculator/" />
    <!-- Global stylesheet -->
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header>
      <h1>Pallet Calculator</h1>
      <nav>
        <a href="./pallet-calculator/" class="curr">Pallet Calculator</a>
        <a href="./ti-hi-calculator.html">TI HI Calculator</a>
        <a href="./pallet-weight-calculator.html">Weight Calculator</a>
        <a href="./pallet-cube-calculator.html">Cube Calculator</a>
        <a href="./how-many-pallets-in-53-foot-trailer.html">53‑ft Trailer</a>
        <a href="./how-many-pallets-in-20ft-container.html">20 ft Container</a>
        <a href="./how-many-pallets-in-40ft-container.html">40 ft Container</a>
        <a href="./pallet-dimensions.html">Pallet Dimensions</a>
      </nav>
    <div class="language-list">
      <a href="/pallet-calculator/" class="curr">EN</a>
      <a href="/hi/pallet-calculator/">HI</a>
      <a href="/tl/pallet-calculator/">TL</a>
    </div>
    </header>
    <main>
      <p>
        Enter the dimensions for one or more cartons and the pallet to estimate
        how many cartons fit. This tool calculates TI (cases per layer) and HI
        (layers per pallet) for each SKU and summarises totals. All dimensions
        are in inches; you can convert units on the Cube Calculator page.
      </p>
      <form id="palletForm">
        <h2>Cartons (SKU)</h2>
        <table id="skuTable">
          <thead>
            <tr>
              <th>#</th>
              <th>Length (in)</th>
              <th>Width (in)</th>
              <th>Height (in)</th>
              <th>Quantity</th>
              <th>Remove</th>
            </tr>
          </thead>
          <tbody>
            <tr class="skuRow">
              <td class="skuIndex">1</td>
              <td><input type="number" step="any" min="0" name="length" required /></td>
              <td><input type="number" step="any" min="0" name="width" required /></td>
              <td><input type="number" step="any" min="0" name="height" required /></td>
              <td><input type="number" step="1" min="1" name="qty" value="1" required /></td>
              <td><button type="button" class="btn removeRow" title="Remove row">X</button></td>
            </tr>
          </tbody>
        </table>
        <button type="button" id="addSkuBtn" class="btn">Add SKU</button>
        <h2>Pallet</h2>
        <label for="palletLength">Length (in):</label>
        <input type="number" id="palletLength" name="palletLength" step="any" min="1" value="48" required />
        <label for="palletWidth">Width (in):</label>
        <input type="number" id="palletWidth" name="palletWidth" step="any" min="1" value="40" required />
        <label for="maxHeight">Max stack height (in):</label>
        <input type="number" id="maxHeight" name="maxHeight" step="any" min="1" value="60" required />
        <p>
          (Typical pallet footprint is 48&nbsp;×&nbsp;40&nbsp;inches. Adjust if you use
          another size. Max stack height excludes pallet height.)
        </p>
        <button type="submit" class="btn">Calculate</button>
      </form>
      <div id="resultContainer"></div>
    </main>
    <footer>
      <p>
        &copy; 2025 Pallet Tools. Last updated on
        <time datetime="2025-08-17">August 17, 2025</time>.
      </p>
    </footer>
    <script>
      // Helper to parse query parameters into an object
      function parseQuery() {
        const params = new URLSearchParams(window.location.search);
        const result = {};
        params.forEach((v, k) => {
          result[k] = v;
        });
        return result;
      }
      // Populate form based on query parameters
      function loadFromQuery() {
        const params = parseQuery();
        if (params.pLength) document.getElementById("palletLength").value = params.pLength;
        if (params.pWidth) document.getElementById("palletWidth").value = params.pWidth;
        if (params.maxHeight) document.getElementById("maxHeight").value = params.maxHeight;
        if (params.skus) {
          // Clear existing
          const tbody = document.querySelector("#skuTable tbody");
          tbody.innerHTML = "";
          try {
            const skus = JSON.parse(decodeURIComponent(params.skus));
            skus.forEach((sku, idx) => {
              addRow(sku.length, sku.width, sku.height, sku.qty);
            });
          } catch (e) {
            console.warn("Failed to parse skus from query", e);
          }
        }
      }
      // Add a new SKU row to the table
      function addRow(length = "", width = "", height = "", qty = 1) {
        const tbody = document.querySelector("#skuTable tbody");
        const index = tbody.children.length + 1;
        const tr = document.createElement("tr");
        tr.classList.add("skuRow");
        tr.innerHTML = `
          <td class="skuIndex">${index}</td>
          <td><input type="number" step="any" min="0" name="length" value="${length}" required></td>
          <td><input type="number" step="any" min="0" name="width" value="${width}" required></td>
          <td><input type="number" step="any" min="0" name="height" value="${height}" required></td>
          <td><input type="number" step="1" min="1" name="qty" value="${qty}" required></td>
          <td><button type="button" class="btn removeRow" title="Remove row">X</button></td>
        `;
        tbody.appendChild(tr);
        updateIndices();
      }
      // Update row indices after adding/removing rows
      function updateIndices() {
        document.querySelectorAll(".skuIndex").forEach((el, idx) => {
          el.textContent = idx + 1;
        });
      }
      // Remove SKU row when clicking remove button
      document.addEventListener("click", function (e) {
        if (e.target.classList.contains("removeRow")) {
          const row = e.target.closest("tr");
          row.remove();
          updateIndices();
        }
      });
      // Add SKU button handler
      document.getElementById("addSkuBtn").addEventListener("click", function () {
        addRow();
      });
      // Calculate results when form is submitted
      document.getElementById("palletForm").addEventListener("submit", function (e) {
        e.preventDefault();
        calculate();
      });
      function calculate() {
        const resultEl = document.getElementById("resultContainer");
        resultEl.innerHTML = "";
        // Collect pallet dims
        const pLength = parseFloat(document.getElementById("palletLength").value);
        const pWidth = parseFloat(document.getElementById("palletWidth").value);
        const maxHeight = parseFloat(document.getElementById("maxHeight").value);
        if (isNaN(pLength) || isNaN(pWidth) || isNaN(maxHeight)) {
          resultEl.innerHTML = '<div class="error">Please enter valid pallet dimensions.</div>';
          return;
        }
        const skuRows = document.querySelectorAll("#skuTable tbody tr");
        if (skuRows.length === 0) {
          resultEl.innerHTML = '<div class="error">Please add at least one SKU.</div>';
          return;
        }
        const skus = [];
        let totalBoxes = 0;
        let resultHtml = '';
        skuRows.forEach((row, idx) => {
          const length = parseFloat(row.querySelector("input[name='length']").value);
          const width = parseFloat(row.querySelector("input[name='width']").value);
          const height = parseFloat(row.querySelector("input[name='height']").value);
          const qty = parseInt(row.querySelector("input[name='qty']").value, 10);
          if (isNaN(length) || isNaN(width) || isNaN(height) || isNaN(qty)) return;
          // TI: how many cases per layer
          const ti = Math.floor(pLength / length) * Math.floor(pWidth / width);
          // HI: how many layers given max height
          const hi = Math.floor(maxHeight / height);
          const boxesPerPallet = ti * hi;
          const boxesLoaded = Math.min(qty, boxesPerPallet);
          totalBoxes += boxesLoaded;
          skus.push({ length, width, height, qty });
          resultHtml += `<p>SKU ${idx + 1}: TI = ${ti}, HI = ${hi}, Boxes loaded = ${boxesLoaded} of ${qty}</p>`;
        });
        resultHtml += `<p><strong>Total loaded boxes:</strong> ${totalBoxes}</p>`;
        resultEl.innerHTML = `<div class="result">${resultHtml}</div>`;
        // Update URL with parameters for sharing
        const params = new URLSearchParams();
        params.set('pLength', pLength.toString());
        params.set('pWidth', pWidth.toString());
        params.set('maxHeight', maxHeight.toString());
        params.set('skus', encodeURIComponent(JSON.stringify(skus)));
        const newUrl = window.location.pathname + '?' + params.toString();
        window.history.replaceState({}, '', newUrl);
      }
      // On page load, populate values from query string
      loadFromQuery();
    </script>
  </body>
</html>